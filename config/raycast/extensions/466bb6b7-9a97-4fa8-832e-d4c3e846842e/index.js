"use strict";var p=Object.defineProperty;var T=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var E=Object.prototype.hasOwnProperty;var B=(e,n)=>{for(var s in n)p(e,s,{get:n[s],enumerable:!0})},b=(e,n,s,u)=>{if(n&&typeof n=="object"||typeof n=="function")for(let i of x(n))!E.call(e,i)&&i!==s&&p(e,i,{get:()=>n[i],enumerable:!(u=T(n,i))||u.enumerable});return e};var $=e=>b(p({},"__esModule",{value:!0}),e);var I={};B(I,{default:()=>A});module.exports=$(I);var t=require("@raycast/api"),l=require("react"),a=require("react/jsx-runtime");function A(){let[e,n]=(0,l.useState)(""),[s,u]=(0,l.useState)("");(0,l.useEffect)(()=>{s||i()},[s]);function i(){(0,t.getSelectedText)().then(o=>{console.log(`selectedText:
`,o),u(o.trim())}).catch(()=>{})}function k(o,g){let f=o.split(`
`),r="```",m=0;return f.map(c=>{if(c.trim().startsWith(r))if(m+=1,m%2===1){let[S,d]=c.split(r);if(d.length>0){let L=d.replace(d,`${g}`);return`${S}${r}${L}`}else return c+g}else return c;else return c}).join(`
`)}function w(o){if(o===void 0)return!1;let g=o.split(`
`),f="```";for(let r of g)if(r.trim().startsWith(f))return!0;return!1}let h=w(s),C=()=>h?(0,a.jsx)(t.List.EmptyView,{icon:t.Icon.Checkmark,title:"Ok, ready to set the language."}):(0,a.jsx)(t.List.EmptyView,{icon:t.Icon.ExclamationMark,title:"Please select the markdown code blocks first!"}),y=e.length>0?`Set Language: ${e}`:"Set Language";return(0,a.jsx)(t.List,{isShowingDetail:!1,searchBarPlaceholder:"Type a language...",searchText:e,onSearchTextChange:o=>{n(o)},actions:h&&(0,a.jsx)(t.ActionPanel,{children:(0,a.jsx)(t.Action,{title:y,onAction:()=>{let o=k(s,e);t.Clipboard.paste(o),(0,t.closeMainWindow)(),(0,t.popToRoot)()}})}),children:C()})}0&&(module.exports={});
